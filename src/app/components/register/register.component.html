<div class="auth-container">
  <div class="auth-card">
    <div class="auth-header">
      <h1>Inscription</h1>
      <p>Créez votre compte pour accéder aux quiz éducatifs</p>
    </div>
    
    <form (ngSubmit)="onSubmit()" #registerForm="ngForm">
      <div class="form-group" [class.error]="nomInput.invalid && nomInput.touched">
        <label for="nom">Nom complet</label>
        <div class="input-field">
          <div class="icon-container">
            <svg class="user-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
              <circle fill="#5677fc" cx="12" cy="7" r="5"/>
              <path fill="#5677fc" d="M3,21 C3,16.6 7,13 12,13 C17,13 21,16.6 21,21"/>
            </svg>
          </div>
          <input 
            type="text" 
            id="nom" 
            [(ngModel)]="nom" 
            name="nom" 
            required
            minlength="3"
            #nomInput="ngModel"
            placeholder="Votre nom complet">
        </div>
        <div class="error-message" *ngIf="nomInput.invalid && nomInput.touched">
          <span *ngIf="nomInput.errors?.['required']">Le nom est requis</span>
          <span *ngIf="nomInput.errors?.['minlength']">Le nom doit contenir au moins 3 caractères</span>
        </div>
      </div>

      <div class="form-group" [class.error]="emailInput.invalid && emailInput.touched">
        <label for="email">Email</label>
        <div class="input-field">
          <div class="icon-container">
            <svg class="email-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
              <path fill="none" stroke="#5677fc" stroke-width="2" d="M3,5 L21,5 L21,19 L3,19 L3,5 M3,5 L12,13 L21,5"/>
            </svg>
          </div>
          <input 
            type="email" 
            id="email" 
            [(ngModel)]="email" 
            name="email" 
            required 
            email
            #emailInput="ngModel"
            placeholder="votre-email@exemple.com">
        </div>
        <div class="error-message" *ngIf="emailInput.invalid && emailInput.touched">
          <span *ngIf="emailInput.errors?.['required']">L'email est requis</span>
          <span *ngIf="emailInput.errors?.['email']">Veuillez saisir une adresse email valide</span>
        </div>
      </div>

      <div class="form-group" [class.error]="passwordInput.invalid && passwordInput.touched">
        <label for="mot_de_passe">Mot de passe</label>
        <div class="input-field">
          <div class="icon-container">
            <svg class="lock-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
              <path fill="#F0C419" d="M18,10 L18,8 C18,4.7 15.3,2 12,2 C8.7,2 6,4.7 6,8 L6,10 L4,10 L4,22 L20,22 L20,10 L18,10 Z M8,8 C8,5.8 9.8,4 12,4 C14.2,4 16,5.8 16,8 L16,10 L8,10 L8,8 Z"/>
              <path fill="#F29C1F" d="M12,16 C13.1,16 14,15.1 14,14 C14,12.9 13.1,12 12,12 C10.9,12 10,12.9 10,14 C10,15.1 10.9,16 12,16 Z"/>
            </svg>
          </div>
          <input 
            [type]="showPassword ? 'text' : 'password'" 
            id="mot_de_passe" 
            [(ngModel)]="mot_de_passe" 
            name="mot_de_passe" 
            required
            minlength="6"
            #passwordInput="ngModel"
            placeholder="Choisissez un mot de passe">
          <div class="visibility-toggle" (click)="showPassword = !showPassword">
            <svg *ngIf="!showPassword" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
              <path fill="#777" d="M12,5 C16.4183,5 20.0468,7.60879 22,12 C20.0468,16.3912 16.4183,19 12,19 C7.58172,19 3.95319,16.3912 2,12 C3.95319,7.60879 7.58172,5 12,5 Z M12,7 C9.23858,7 7,9.23858 7,12 C7,14.7614 9.23858,17 12,17 C14.7614,17 17,14.7614 17,12 C17,9.23858 14.7614,7 12,7 Z M12,9 C13.6569,9 15,10.3431 15,12 C15,13.6569 13.6569,15 12,15 C10.3431,15 9,13.6569 9,12 C9,10.3431 10.3431,9 12,9 Z"/>
            </svg>
            <svg *ngIf="showPassword" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
              <path fill="#777" d="M2,5 L22,19 M9.9,7.2 C10.5,7.1 11.2,7 12,7 C14.7614,7 17,9.23858 17,12 C17,12.5 16.9,12.9 16.8,13.4 M13.5,14.5 C13.1,14.8 12.6,15 12,15 C10.3431,15 9,13.6569 9,12 C9,11.7 9.1,11.4 9.2,11.1 M17.4,8.8 C19.3,10 20.5,11.9 21,12 C20.0468,16.3912 16.4183,19 12,19 C10.7,19 9.4,18.7 8.3,18.2 M4.6,16 C3.6,15.1 2.9,14 2.5,14 C3.1,11.5 4.5,9.1 6.4,7.6"/>
            </svg>
          </div>
        </div>
        <div class="error-message" *ngIf="passwordInput.invalid && passwordInput.touched">
          <span *ngIf="passwordInput.errors?.['required']">Le mot de passe est requis</span>
          <span *ngIf="passwordInput.errors?.['minlength']">Le mot de passe doit contenir au moins 6 caractères</span>
        </div>
      </div>

      <div class="form-group confirm-password" [class.error]="passwordConfirmInput.invalid && passwordConfirmInput.touched || passwordMismatch">
        <label for="confirm_password">Confirmer le mot de passe</label>
        <div class="input-field">
          <div class="icon-container">
            <svg class="lock-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24">
              <path fill="#F0C419" d="M18,10 L18,8 C18,4.7 15.3,2 12,2 C8.7,2 6,4.7 6,8 L6,10 L4,10 L4,22 L20,22 L20,10 L18,10 Z M8,8 C8,5.8 9.8,4 12,4 C14.2,4 16,5.8 16,8 L16,10 L8,10 L8,8 Z"/>
              <path fill="#F29C1F" d="M12,16 C13.1,16 14,15.1 14,14 C14,12.9 13.1,12 12,12 C10.9,12 10,12.9 10,14 C10,15.1 10.9,16 12,16 Z"/>
            </svg>
          </div>
          <input 
            [type]="showPassword ? 'text' : 'password'" 
            id="confirm_password" 
            [(ngModel)]="confirmPassword" 
            name="confirm_password" 
            required
            #passwordConfirmInput="ngModel"
            placeholder="Confirmez votre mot de passe">
        </div>
        <div class="error-message" *ngIf="(passwordConfirmInput.invalid && passwordConfirmInput.touched) || passwordMismatch">
          <span *ngIf="passwordConfirmInput.errors?.['required']">La confirmation du mot de passe est requise</span>
          <span *ngIf="passwordMismatch">Les mots de passe ne correspondent pas</span>
        </div>
      </div>

      <div class="form-group terms">
        <label class="checkbox-container">
          <input type="checkbox" [(ngModel)]="acceptTerms" name="acceptTerms" required #termsCheckbox="ngModel">
          <span class="checkbox-text">J'accepte les <a href="#">conditions d'utilisation</a> et la <a href="#">politique de confidentialité</a></span>
        </label>
        <div class="error-message" *ngIf="termsCheckbox.invalid && registerForm.submitted">
          <span>Vous devez accepter les conditions d'utilisation</span>
        </div>
      </div>

      <div class="alert alert-danger" *ngIf="errorMessage">
        {{ errorMessage }}
      </div>

      <button type="submit" class="signup-button" [disabled]="registerForm.invalid || passwordMismatch || !acceptTerms || loading">
        <span *ngIf="loading" class="loader"></span>
        <span *ngIf="!loading">S'inscrire</span>
      </button>
    </form>

    <div class="auth-footer">
      <p>Déjà inscrit ? <a routerLink="/login">Se connecter</a></p>
    </div>
  </div>
</div>